@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap);
:root{
  --orange:#f07c00;--orange-hover:#d56e00;--brand:#6ba6d9;--base:#dde1e6;--active:#2c6aa6;
  --dot-size:36px;--rail-h:6px;--fill-scale:0;--rail-top:calc(var(--dot-size)/2 - var(--rail-h)/2);
  --coach-icon-url:url("https://hitocareer.com/inquiry/wp-content/uploads/2025/08/chat_icon.webp")
}

/* ステッパー */
.step-header{display:none!important}
.stepper{width:85%;max-width:1000px;margin:0 auto 20px;position:relative;padding-top:calc(var(--dot-size)/2 + 12px)}
.stepper::before{content:"";position:absolute;left:calc(var(--dot-size)/2);right:calc(var(--dot-size)/2);top:var(--rail-top);height:var(--rail-h);border-radius:999px;background:var(--base)}
.stepper .stepper-fill{position:absolute;left:calc(var(--dot-size)/2);right:calc(var(--dot-size)/2);top:var(--rail-top);height:var(--rail-h);border-radius:999px;background:var(--active);transform-origin:left center;transform:scaleX(var(--fill-scale));transition:transform .45s ease}
.stepper .stepper-list{list-style:none;margin:0;padding:0;display:flex;justify-content:space-between;align-items:flex-start;position:relative;z-index:1}
.stepper .item{text-align:center;width:max(48px,calc(100%/6))}
.stepper .dot{width:var(--dot-size);height:var(--dot-size);border-radius:999px;box-sizing:border-box;border:3px solid var(--base);background:#fff;color:#7b8088;display:inline-flex;align-items:center;justify-content:center;font-size:16px}
.stepper .item.current .dot{background:#c7e5ff;border-color:#c7e5ff;font-size:20px;font-weight:700;color:#2c6aa6}
.stepper .item.done .dot{background:#e6eef4;border-color:#2c6aa6;color:var(--brand)}
.stepper .label{display:block;margin-top:8px;font-size:8px;color:#6b7280;white-space:nowrap}
@media (max-width:560px){.stepper .label{font-size:11px;white-space:normal}}

/* 本文 */
.step{text-align:center}
.step>label{font-weight:700;color:#2c6aa6;font-size:16px;display:block;width:80%;margin:0 auto 4px;text-align:left;font-family:Noto Sans JP,sans-serif;padding:8px 0 0}
.coach-bubble{width:80%;margin:6px auto 10px;display:flex;align-items:center;gap:10px}
.cb-icon{width:50px;height:50px;border-radius:50%;overflow:hidden;flex:0 0 50px;background:var(--coach-icon-url) center/cover no-repeat;box-shadow:0 0 0 2px #fff,0 0 0 4px rgba(0,0,0,.06)}
.cb-text{position:relative;background:#cfeff1;border-radius:999px;padding:10px 16px;color:#000;font-size:11px;font-family:Noto Sans JP,sans-serif;font-weight:700}
.cb-text:after{content:"";position:absolute;left:-10px;top:50%;transform:translateY(-50%);border:8px solid transparent;border-right-color:#cfeff1}
.privacy-note{width:80%;margin:2px auto 8px;font-size:14px;color:#000;text-align:left;font-family:Noto Sans JP,sans-serif;font-weight:400;display:none}
.choice-row{margin-top:8px}
.btn-choice_01,.btn-choice_02{width:200px;height:80px;font-size:18px;background:#6ba6d9;color:#fff;border:none;border-radius:6px;cursor:pointer;margin:10px 8px 0;box-shadow:0 5px 0 #2c6aa6,0 8px 14px #0000001f;transition:.15s}
.btn-choice_01:hover,.btn-choice_02:hover{background:#538ec3}
.nav-row{width:80%;margin:20px auto 0;display:flex;justify-content:space-between;align-items:center}
.btn-back{width:70px;height:50px;font-size:16px;border-radius:6px;cursor:pointer;border:2px solid #6ba6d9;background:#fff;color:#6ba6d9}
.btn-back:hover{background:#eaf3fb}
.btn-next{width:140px;height:50px;font-size:16px;border-radius:6px;cursor:pointer;border:2px solid #6ba6d9;background:#6ba6d9;color:#fff;transition:.15s;box-shadow:0 4px 0 #2c6aa6,0 5px 9px #0000001f}
.btn-next:hover{background:#fff;color:#6ba6d9}
.error-text{color:#d93025;margin-top:8px;font-size:13px;min-height:1.2em}
.invalid{border-color:#d93025!important}
#step3 input,#step4 input,#step5 input,#step6 input{flex-direction:column;width:80%;padding:10px;line-height:1.6;height:auto;border:1px solid #ccc;border-radius:6px;background:#fff;box-sizing:border-box;font-size:16px;margin-top:8px}

/* マルチセレクト（PC/タブレット既定） */
.multi-select{width:80%;margin:8px auto 0;position:relative;text-align:left;font-family:Noto Sans JP,sans-serif;font-weight:400}
.multi-select-display{padding:10px;border:1px solid #ccc;border-radius:6px;background:#fff;cursor:pointer;line-height:1.6;font-size:16px}
.multi-select-display:focus{outline:none;border-color:#6ba6d9;box-shadow:0 0 0 2px rgba(107,166,217,.2)}
.multi-select-dropdown{position:absolute;left:0;right:0;top:calc(100% + 6px);background:#fff;border:1px solid #ddd;border-radius:6px;box-shadow:0 6px 18px rgba(0,0,0,.08);max-height:320px;overflow:auto;z-index:1000}
.multi-select-dropdown ul{list-style:none;padding:12px;margin:0}
.multi-select-dropdown li{margin:6px 0}
.multi-select-dropdown label{display:flex;align-items:center;gap:10px;cursor:pointer;user-select:none}
.multi-select-dropdown input[type="checkbox"]{width:18px;height:18px}

/* グルーピング */
#locationDropdown .group{margin:8px 0}
#locationDropdown .group-toggle{width:100%;display:flex;align-items:center;justify-content:space-between;padding:8px 10px;background:#f6f8fb;border:1px solid #e2e8f0;border-radius:6px;font-weight:700;cursor:pointer;color:#000}
#locationDropdown .group-toggle::after{content:"▾"}
#locationDropdown .group[data-expanded="false"] .group-toggle::after{content:"▸"}
#locationDropdown .group-items{list-style:none;margin:6px 0 0;padding:0 6px}

/* 同意エリア */
.consent-wrap{width:100%;margin:18px auto 0;display:flex;flex-direction:column;align-items:center;gap:12px}
.consent-note{font-size:10px;color:#5a5a5a;margin:0;font-weight:700}
.consent-note a{color:#2c6aa6;text-decoration:underline;font-weight:inherit}

/* 送信ボタン */
.submit-stack{position:relative;display:inline-block;margin:24px 0 12px}
.btn-kicker{position:absolute;top:0;left:50%;transform:translate(-50%,-60%);padding:6px 12px;font-size:12px;font-weight:700;white-space:nowrap;color:var(--orange);background:#fff;border:1px solid var(--orange);border-radius:20px;box-shadow:0 2px 6px rgba(0,0,0,.06);z-index:2;pointer-events:none}
.btn-submit{width:320px;height:56px;border-radius:8px;cursor:pointer;font-size:18px;font-weight:700;border:2px solid var(--orange);background:#fff;color:var(--orange);box-shadow:0 4px 0 #ddd8d8,0 5px 9px #0000001f;transition:.15s;position:relative}
.btn-submit::after{content:'›';font-size:20px;font-weight:700;line-height:1;position:absolute;right:14px;top:50%;transform:translateY(-50%)}
.btn-submit.active{background:var(--orange);color:#fff;box-shadow:0 4px 0 #b65400,0 5px 9px #0000002f}
.btn-submit.active:hover{background:var(--orange-hover)}

/* ローディング */
.loading-overlay{position:fixed;inset:0;display:none;background:rgba(255,255,255,.85);align-items:center;justify-content:center;z-index:9999}
.loading-overlay.show{display:flex}
.loading-box{display:flex;flex-direction:column;align-items:center;gap:12px}
.spinner{width:64px;height:64px;border:6px solid #e5eff7;border-top-color:var(--brand);border-radius:50%;animation:spin 1s linear infinite}
.spinner-text{font-family:Noto Sans JP,sans-serif;font-size:16px;font-weight:700;color:var(--brand);user-select:none;text-align:center}
@keyframes spin{to{transform:rotate(360deg)}}

/* レイアウト幅調整 */
.coach-bubble+label{margin-top:10px;display:block}
#entryForm,#step-form{width:min(950px,100%);margin:0 auto}
.stepper{width:100%!important;max-width:none!important}
.step>label,.coach-bubble,.privacy-note,.multi-select,.nav-row,#step3 input,#step4 input,#step5 input,#step6 input{width:100%!important}
.stepper::before{left:var(--rail-left,calc(var(--dot-size)/2))!important;right:var(--rail-right,calc(var(--dot-size)/2))!important}
.stepper .stepper-fill{left:var(--rail-left,calc(var(--dot-size)/2))!important;right:auto!important;width:var(--fill-width,0)!important;transform:none!important;transition:width .45s ease!important}
#entryForm{box-sizing:border-box}

/* モバイル幅最適化 */
@media (max-width:560px){
  #entryForm{padding:0 30px!important}
  .stepper{padding-top:calc(var(--dot-size)/2 + 16px)!important}
  #locationDropdown .group[data-expanded="false"] .group-items{display:none}
  #locationDropdown input[type="checkbox"]{width:22px;height:22px}
}
#entryForm,#step-form{width:60%!important;margin:0 auto!important;max-width:none!important}
@media (max-width:560px){
  #entryForm,#step-form{width:100%!important;padding:0 30px!important}
}
@media (max-width:560px){
  #entryForm{display:flex!important;justify-content:center!important;align-items:flex-start!important;padding:0 10px!important;box-sizing:border-box!important;margin:0 auto!important;width:100%!important}
  #step-form{width:100%!important;max-width:520px!important;margin:0 auto!important;box-sizing:border-box!important}
}

/* ===== モバイルで multi-select を iOS風ボトムシート化 ===== */
@media (max-width:560px){
  :root{ --ms-modal-height:78vh; --ms-border:rgba(60,60,67,.15); }

  /* 既存のバックドロップは無効（常時グレー化防止） */
  .multi-select::before{ display:none !important; content:none !important; }

  /* 「開いている」時だけバックドロップを出す（いずれかの状態で可） */
  .multi-select.open::before,
  .multi-select[data-open="true"]::before,
  .multi-select:has(.multi-select-dropdown.is-open)::before,
  .multi-select:has(.multi-select-dropdown[style*="display: block"])::before{
    content:""; position:fixed; inset:0; background:rgba(0,0,0,.35); z-index:999;
  }

  /* コンテナ位置は固定化と干渉しないよう static に */
  .multi-select{ position:static; }

  /* ドロップダウン→ボトムシート */
  .multi-select-dropdown{
    position:fixed !important;
    left:8px; right:8px; bottom:8px; top:auto !important;
    height:var(--ms-modal-height);
    max-height:calc(100vh - 60px);
    border-radius:14px;
    background:#fff;
    border:1px solid var(--ms-border);
    box-shadow:0 20px 40px rgba(0,0,0,.2);
    margin:0 !important; padding:0; overflow:hidden; z-index:1000;
    display:none; /* 開いている時だけ下で強制表示 */
  }
  .multi-select.open .multi-select-dropdown,
  .multi-select[data-open="true"] .multi-select-dropdown,
  .multi-select .multi-select-dropdown.is-open{ display:block !important; }

  /* つまみ（ドラッグハンドル風） */
  .multi-select-dropdown::before{
    content:""; display:block; height:44px; background:#fff; position:sticky; top:0; z-index:2; border-bottom:1px solid var(--ms-border);
  }
  .multi-select-dropdown::after{
    content:""; position:absolute; top:10px; left:50%; transform:translateX(-50%);
    width:44px; height:4px; border-radius:999px; background:#cbd5e1; z-index:3;
  }

  /* 本体スクロール */
  .multi-select-dropdown > ul{
    height:calc(100% - 44px);
    overflow:auto; -webkit-overflow-scrolling:touch; background:#fff; padding:0; margin:0;
  }

  /* iOS風の行 */
  .multi-select-dropdown ul{ list-style:none; }
  .multi-select-dropdown li{ margin:0; }
  .multi-select-dropdown label{
    position:relative; display:flex; align-items:center;
    padding:14px 44px 14px 16px; font-size:17px; line-height:1.25; background:#fff;
    -webkit-tap-highlight-color:transparent;
  }
  .multi-select-dropdown li + li label{ border-top:0.5px solid var(--ms-border); }

  /* 実チェックは非表示、右に✓を描画 */
  .multi-select-dropdown input[type="checkbox"]{ position:absolute; left:-9999px; width:1px; height:1px; overflow:hidden; }
  .multi-select-dropdown label:has(input:checked)::after,
  .multi-select-dropdown label.checked::after{
    content:"✓"; position:absolute; right:16px; top:50%; transform:translateY(-50%);
    font-size:18px; line-height:1; color:#0a7d17;
  }

  /* セクション見出し（例: 関東地方）を固定表示 */
  #locationDropdown .group-toggle{
    position:sticky; top:44px; z-index:1;
    background:#f2f2f7; color:#6b7280; font-weight:700;
    border:0; border-bottom:1px solid var(--ms-border);
    margin:0; border-radius:0; padding:10px 16px;
  }
  #locationDropdown .group-items{ padding:0; margin:0; }

  /* 表示フィールドは下層に（重なり順の衝突回避） */
  .multi-select-display{ position:relative; z-index:0; }

  /* シート表示中はスクロール固定（iframe内） */
  html.ms-lock, html.ms-lock body{ overflow:hidden; }
}

@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap);
:root{
  --orange:#f07c00;--orange-hover:#d56e00;--brand:#6ba6d9;--base:#dde1e6;--active:#2c6aa6;
  --dot-size:36px;--rail-h:6px;--fill-scale:0;--rail-top:calc(var(--dot-size)/2 - var(--rail-h)/2);
  --coach-icon-url:url("https://hitocareer.com/inquiry/wp-content/uploads/2025/08/chat_icon.webp")
}

/* ステッパー */
.step-header{display:none!important}
.stepper{width:85%;max-width:1000px;margin:0 auto 20px;position:relative;padding-top:calc(var(--dot-size)/2 + 12px)}
.stepper::before{content:"";position:absolute;left:calc(var(--dot-size)/2);right:calc(var(--dot-size)/2);top:var(--rail-top);height:var(--rail-h);border-radius:999px;background:var(--base)}
.stepper .stepper-fill{position:absolute;left:calc(var(--dot-size)/2);right:calc(var(--dot-size)/2);top:var(--rail-top);height:var(--rail-h);border-radius:999px;background:var(--active);transform-origin:left center;transform:scaleX(var(--fill-scale));transition:transform .45s ease}
.stepper .stepper-list{list-style:none;margin:0;padding:0;display:flex;justify-content:space-between;align-items:flex-start;position:relative;z-index:1}
.stepper .item{text-align:center;width:max(48px,calc(100%/6))}
.stepper .dot{width:var(--dot-size);height:var(--dot-size);border-radius:999px;box-sizing:border-box;border:3px solid var(--base);background:#fff;color:#7b8088;display:inline-flex;align-items:center;justify-content:center;font-size:16px}
.stepper .item.current .dot{background:#c7e5ff;border-color:#c7e5ff;font-size:20px;font-weight:700;color:#2c6aa6}
.stepper .item.done .dot{background:#e6eef4;border-color:#2c6aa6;color:var(--brand)}
.stepper .label{display:block;margin-top:8px;font-size:8px;color:#6b7280;white-space:nowrap}
@media (max-width:560px){.stepper .label{font-size:11px;white-space:normal}}

/* 本文 */
.step{text-align:center}
.step>label{font-weight:700;color:#2c6aa6;font-size:16px;display:block;width:80%;margin:0 auto 4px;text-align:left;font-family:Noto Sans JP,sans-serif;padding:8px 0 0}
.coach-bubble{width:80%;margin:6px auto 10px;display:flex;align-items:center;gap:10px}
.cb-icon{width:50px;height:50px;border-radius:50%;overflow:hidden;flex:0 0 50px;background:var(--coach-icon-url) center/cover no-repeat;box-shadow:0 0 0 2px #fff,0 0 0 4px rgba(0,0,0,.06)}
.cb-text{position:relative;background:#cfeff1;border-radius:999px;padding:10px 16px;color:#000;font-size:11px;font-family:Noto Sans JP,sans-serif;font-weight:700}
.cb-text:after{content:"";position:absolute;left:-10px;top:50%;transform:translateY(-50%);border:8px solid transparent;border-right-color:#cfeff1}
.privacy-note{width:80%;margin:2px auto 8px;font-size:14px;color:#000;text-align:left;font-family:Noto Sans JP,sans-serif;font-weight:400;display:none}
.choice-row{margin-top:8px}
.btn-choice_01,.btn-choice_02{width:200px;height:80px;font-size:18px;background:#6ba6d9;color:#fff;border:none;border-radius:6px;cursor:pointer;margin:10px 8px 0;box-shadow:0 5px 0 #2c6aa6,0 8px 14px #0000001f;transition:.15s}
.btn-choice_01:hover,.btn-choice_02:hover{background:#538ec3}
.nav-row{width:80%;margin:20px auto 0;display:flex;justify-content:space-between;align-items:center}
.btn-back{width:70px;height:50px;font-size:16px;border-radius:6px;cursor:pointer;border:2px solid #6ba6d9;background:#fff;color:#6ba6d9}
.btn-back:hover{background:#eaf3fb}
.btn-next{width:140px;height:50px;font-size:16px;border-radius:6px;cursor:pointer;border:2px solid #6ba6d9;background:#6ba6d9;color:#fff;transition:.15s;box-shadow:0 4px 0 #2c6aa6,0 5px 9px #0000001f}
.btn-next:hover{background:#fff;color:#6ba6d9}
.error-text{color:#d93025;margin-top:8px;font-size:13px;min-height:1.2em}
.invalid{border-color:#d93025!important}
#step3 input,#step4 input,#step5 input,#step6 input{flex-direction:column;width:80%;padding:10px;line-height:1.6;height:auto;border:1px solid #ccc;border-radius:6px;background:#fff;box-sizing:border-box;font-size:16px;margin-top:8px}

/* マルチセレクト（PC/タブレット既定） */
.multi-select{width:80%;margin:8px auto 0;position:relative;text-align:left;font-family:Noto Sans JP,sans-serif;font-weight:400}
.multi-select-display{padding:10px;border:1px solid #ccc;border-radius:6px;background:#fff;cursor:pointer;line-height:1.6;font-size:16px}
.multi-select-display:focus{outline:none;border-color:#6ba6d9;box-shadow:0 0 0 2px rgba(107,166,217,.2)}
.multi-select-dropdown{position:absolute;left:0;right:0;top:calc(100% + 6px);background:#fff;border:1px solid #ddd;border-radius:6px;box-shadow:0 6px 18px rgba(0,0,0,.08);max-height:320px;overflow:auto;z-index:1000}
.multi-select-dropdown ul{list-style:none;padding:12px;margin:0}
.multi-select-dropdown li{margin:6px 0}
.multi-select-dropdown label{display:flex;align-items:center;gap:10px;cursor:pointer;user-select:none}
.multi-select-dropdown input[type="checkbox"]{width:18px;height:18px}

/* グルーピング */
#locationDropdown .group{margin:8px 0}
#locationDropdown .group-toggle{width:100%;display:flex;align-items:center;justify-content:space-between;padding:8px 10px;background:#f6f8fb;border:1px solid #e2e8f0;border-radius:6px;font-weight:700;cursor:pointer;color:#000}
#locationDropdown .group-toggle::after{content:"▾"}
#locationDropdown .group[data-expanded="false"] .group-toggle::after{content:"▸"}
#locationDropdown .group-items{list-style:none;margin:6px 0 0;padding:0 6px}

/* 同意エリア */
.consent-wrap{width:100%;margin:18px auto 0;display:flex;flex-direction:column;align-items:center;gap:12px}
.consent-note{font-size:10px;color:#5a5a5a;margin:0;font-weight:700}
.consent-note a{color:#2c6aa6;text-decoration:underline;font-weight:inherit}

/* 送信ボタン */
.submit-stack{position:relative;display:inline-block;margin:24px 0 12px}
.btn-kicker{position:absolute;top:0;left:50%;transform:translate(-50%,-60%);padding:6px 12px;font-size:12px;font-weight:700;white-space:nowrap;color:var(--orange);background:#fff;border:1px solid var(--orange);border-radius:20px;box-shadow:0 2px 6px rgba(0,0,0,.06);z-index:2;pointer-events:none}
.btn-submit{width:320px;height:56px;border-radius:8px;cursor:pointer;font-size:18px;font-weight:700;border:2px solid var(--orange);background:#fff;color:var(--orange);box-shadow:0 4px 0 #ddd8d8,0 5px 9px #0000001f;transition:.15s;position:relative}
.btn-submit::after{content:'›';font-size:20px;font-weight:700;line-height:1;position:absolute;right:14px;top:50%;transform:translateY(-50%)}
.btn-submit.active{background:var(--orange);color:#fff;box-shadow:0 4px 0 #b65400,0 5px 9px #0000002f}
.btn-submit.active:hover{background:var(--orange-hover)}

/* ローディング */
.loading-overlay{position:fixed;inset:0;display:none;background:rgba(255,255,255,.85);align-items:center;justify-content:center;z-index:9999}
.loading-overlay.show{display:flex}
.loading-box{display:flex;flex-direction:column;align-items:center;gap:12px}
.spinner{width:64px;height:64px;border:6px solid #e5eff7;border-top-color:var(--brand);border-radius:50%;animation:spin 1s linear infinite}
.spinner-text{font-family:Noto Sans JP,sans-serif;font-size:16px;font-weight:700;color:var(--brand);user-select:none;text-align:center}
@keyframes spin{to{transform:rotate(360deg)}}

/* レイアウト幅調整 */
.coach-bubble+label{margin-top:10px;display:block}
#entryForm,#step-form{width:min(950px,100%);margin:0 auto}
.stepper{width:100%!important;max-width:none!important}
.step>label,.coach-bubble,.privacy-note,.multi-select,.nav-row,#step3 input,#step4 input,#step5 input,#step6 input{width:100%!important}
.stepper::before{left:var(--rail-left,calc(var(--dot-size)/2))!important;right:var(--rail-right,calc(var(--dot-size)/2))!important}
.stepper .stepper-fill{left:var(--rail-left,calc(var(--dot-size)/2))!important;right:auto!important;width:var(--fill-width,0)!important;transform:none!important;transition:width .45s ease!important}
#entryForm{box-sizing:border-box}

/* モバイル幅最適化 */
@media (max-width:560px){
  #entryForm{padding:0 30px!important}
  .stepper{padding-top:calc(var(--dot-size)/2 + 16px)!important}
  #locationDropdown .group[data-expanded="false"] .group-items{display:none}
  #locationDropdown input[type="checkbox"]{width:22px;height:22px}
}
#entryForm,#step-form{width:60%!important;margin:0 auto!important;max-width:none!important}
@media (max-width:560px){
  #entryForm,#step-form{width:100%!important;padding:0 30px!important}
}
@media (max-width:560px){
  #entryForm{display:flex!important;justify-content:center!important;align-items:flex-start!important;padding:0 10px!important;box-sizing:border-box!important;margin:0 auto!important;width:100%!important}
  #step-form{width:100%!important;max-width:520px!important;margin:0 auto!important;box-sizing:border-box!important}
}

/* ===== モバイルで multi-select を iOS風ボトムシート化 ===== */
@media (max-width:560px){
  :root{ --ms-modal-height:78vh; --ms-border:rgba(60,60,67,.15); }

  /* 既存のバックドロップは無効（常時グレー化防止） */
  .multi-select::before{ display:none !important; content:none !important; }

  /* 「開いている」時だけバックドロップを出す（いずれかの状態で可） */
  .multi-select.open::before,
  .multi-select[data-open="true"]::before,
  .multi-select:has(.multi-select-dropdown.is-open)::before,
  .multi-select:has(.multi-select-dropdown[style*="display: block"])::before{
    content:""; position:fixed; inset:0; background:rgba(0,0,0,.35); z-index:999;
  }

  /* コンテナ位置は固定化と干渉しないよう static に */
  .multi-select{ position:static; }

  /* ドロップダウン→ボトムシート */
  .multi-select-dropdown{
    position:fixed !important;
    left:8px; right:8px; bottom:8px; top:auto !important;
    height:var(--ms-modal-height);
    max-height:calc(100vh - 60px);
    border-radius:14px;
    background:#fff;
    border:1px solid var(--ms-border);
    box-shadow:0 20px 40px rgba(0,0,0,.2);
    margin:0 !important; padding:0; overflow:hidden; z-index:1000;
    display:none; /* 開いている時だけ下で強制表示 */
  }
  .multi-select.open .multi-select-dropdown,
  .multi-select[data-open="true"] .multi-select-dropdown,
  .multi-select .multi-select-dropdown.is-open{ display:block !important; }

  /* つまみ（ドラッグハンドル風） */
  .multi-select-dropdown::before{
    content:""; display:block; height:44px; background:#fff; position:sticky; top:0; z-index:2; border-bottom:1px solid var(--ms-border);
  }
  .multi-select-dropdown::after{
    content:""; position:absolute; top:10px; left:50%; transform:translateX(-50%);
    width:44px; height:4px; border-radius:999px; background:#cbd5e1; z-index:3;
  }

  /* 本体スクロール */
  .multi-select-dropdown > ul{
    height:calc(100% - 44px);
    overflow:auto; -webkit-overflow-scrolling:touch; background:#fff; padding:0; margin:0;
  }

  /* iOS風の行 */
  .multi-select-dropdown ul{ list-style:none; }
  .multi-select-dropdown li{ margin:0; }
  .multi-select-dropdown label{
    position:relative; display:flex; align-items:center;
    padding:14px 44px 14px 16px; font-size:17px; line-height:1.25; background:#fff;
    -webkit-tap-highlight-color:transparent;
  }
  .multi-select-dropdown li + li label{ border-top:0.5px solid var(--ms-border); }

  /* 実チェックは非表示、右に✓を描画 */
  .multi-select-dropdown input[type="checkbox"]{ position:absolute; left:-9999px; width:1px; height:1px; overflow:hidden; }
  .multi-select-dropdown label:has(input:checked)::after,
  .multi-select-dropdown label.checked::after{
    content:"✓"; position:absolute; right:16px; top:50%; transform:translateY(-50%);
    font-size:18px; line-height:1; color:#0a7d17;
  }

  /* セクション見出し（例: 関東地方）を固定表示 */
  #locationDropdown .group-toggle{
    position:sticky; top:44px; z-index:1;
    background:#f2f2f7; color:#6b7280; font-weight:700;
    border:0; border-bottom:1px solid var(--ms-border);
    margin:0; border-radius:0; padding:10px 16px;
  }
  #locationDropdown .group-items{ padding:0; margin:0; }

  /* 表示フィールドは下層に（重なり順の衝突回避） */
  .multi-select-display{ position:relative; z-index:0; }

  /* シート表示中はスクロール固定（iframe内） */
  html.ms-lock, html.ms-lock body{ overflow:hidden; }
}
